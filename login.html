<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Login | Webshop</title>
    <link href="assets/css/bootstrap.min.css" rel="stylesheet" />
    <link href="assets/css/font-awesome.min.css" rel="stylesheet" />
    <link href="assets/css/prettyPhoto.css" rel="stylesheet" />
    <link href="assets/css/price-range.css" rel="stylesheet" />
    <link href="assets/css/animate.css" rel="stylesheet" />
    <link href="assets/css/main.css" rel="stylesheet" />
    <link href="assets/css/responsive.css" rel="stylesheet" />
    <!--[if lt IE 9]>
      <script src="js/html5shiv.js"></script>
      <script src="js/respond.min.js"></script>
    <![endif]-->
    <link rel="shortcut icon" href="assets/images/ico/favicon.ico" />
    <link
      rel="apple-touch-icon-precomposed"
      sizes="144x144"
      href="assets/images/ico/apple-touch-icon-144-precomposed.png"
    />
    <link
      rel="apple-touch-icon-precomposed"
      sizes="114x114"
      href="assets/images/ico/apple-touch-icon-114-precomposed.png"
    />
    <link
      rel="apple-touch-icon-precomposed"
      sizes="72x72"
      href="assets/images/ico/apple-touch-icon-72-precomposed.png"
    />
    <link
      rel="apple-touch-icon-precomposed"
      href="assets/images/ico/apple-touch-icon-57-precomposed.png"
    /></head
  ><!--/head-->

  <body style="display: none">
    <section id="form">
      <!--form-->
      <div class="container">
        <div class="row">
          <div class="col-sm-4 col-sm-offset-1">
            <div class="login-form">
              <!--login form-->
              <h2>Login to your account</h2>
              <form action="#">
                <input
                  id="login-email"
                  type="email"
                  placeholder="Email Address"
                />
                <input
                  id="login-password"
                  type="password"
                  placeholder="Password"
                />
                <button
                  id="login-submit"
                  type="submit"
                  class="btn btn-default"
                  onclick="doLogin()"
                >
                  Login
                </button>
                <br />

                <div class="pull-right">
                  <a href="#">Forgot Password</a>
                </div>
              </form>
            </div>
            <!--/login form-->
          </div>
          <div class="col-sm-1">
            <h2 class="or">OR</h2>
          </div>
          <div class="col-sm-4">
            <div class="signup-form">
              <!--sign up form-->
              <h2>New User Signup!</h2>
              <form action="#">
                <input id="signup-name" type="text" placeholder="Name" />
                <input id="signup-surname" type="text" placeholder="Surname" />
                <input
                  id="signup-email"
                  type="email"
                  placeholder="Email Address"
                />
                <input
                  id="signup-password"
                  type="password"
                  placeholder="Password"
                />
                <input
                  id="signup-phone"
                  type="phone"
                  placeholder="Phone number"
                />
                <input id="signup-city" type="text" placeholder="City" />
                <input id="signup-zip" type="number" placeholder="Zip Code" />
                <input id="signup-address" type="text" placeholder="Address" />
                <br />
                <button
                  id="signup-submit"
                  type="submit"
                  class="btn btn-default"
                  onclick="doSignUp();"
                >
                  Signup
                </button>
              </form>
            </div>
            <!--/sign up form-->
          </div>
        </div>
      </div>
    </section>
    <!--/form-->

    <script src="assets/js/jquery.js"></script>
    <script src="assets/js/price-range.js"></script>
    <script src="assets/js/jquery.scrollUp.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/jquery.prettyPhoto.js"></script>
    <script src="assets/js/main.js"></script>

    <script type="text/javascript">
      $(function () {
        if (window.localStorage.getItem("token")) {
          window.location = "index.html";
        } else {
          $("body").show();
        }
      });

      function doLogin() {
        var login_info = {
          email: $("#login-email").val(),
          password: $("#login-password").val(),
        };

        $("#login-submit").prop("disabled", true);
        $.post("http://localhost/webshop/api/login", login_info)
          .done(function (data) {
            window.localStorage.setItem("token", data.token);
            window.location = "index.html";
          })
          .fail(function (error) {
            $("#login-submit").prop("disabled", false);
            alert(error.responseJSON.message);
          });
      }

      function doSignUp() {
        var signup_info = {
          name: $("#signup-name").val(),
          surname: $("#signup-surname").val(),
          email: $("#signup-email").val(),
          password: $("#signup-password").val(),
          phone_number: $("#signup-phone").val(),
          city: $("#signup-city").val(),
          zip_code: $("#signup-zip").val(),
          address: $("#signup-address").val(),
        };
        console.log(signup_info);
        $("#signup-submit").prop("disabled", true);
        $.post("http://localhost/webshop/api/register", signup_info)
          .done(function (data) {
            console.log(data);
            alert("success register");
          })
          .fail(function (error) {
            $("#signup-submit").prop("disabled", false);
            console.log(error);
            alert(error.responseJSON.message);
          });
      }
    </script>
  </body>
</html>
